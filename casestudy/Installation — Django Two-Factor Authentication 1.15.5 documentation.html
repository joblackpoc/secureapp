<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0073)https://django-two-factor-auth.readthedocs.io/en/stable/installation.html -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    
    <title>Installation — Django Two-Factor Authentication 1.15.5 documentation</title>
    <link rel="stylesheet" href="./Installation — Django Two-Factor Authentication 1.15.5 documentation_files/classic.css" type="text/css">
    <link rel="stylesheet" href="./Installation — Django Two-Factor Authentication 1.15.5 documentation_files/pygments.css" type="text/css">
    <link rel="stylesheet" type="text/css" href="./Installation — Django Two-Factor Authentication 1.15.5 documentation_files/badge_only.css">
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="./Installation — Django Two-Factor Authentication 1.15.5 documentation_files/documentation_options.js.download"></script>
    <script type="text/javascript" src="./Installation — Django Two-Factor Authentication 1.15.5 documentation_files/jquery.js.download"></script>
    <script type="text/javascript" src="./Installation — Django Two-Factor Authentication 1.15.5 documentation_files/underscore.js.download"></script>
    <script type="text/javascript" src="./Installation — Django Two-Factor Authentication 1.15.5 documentation_files/doctools.js.download"></script>
    <script type="text/javascript" src="./Installation — Django Two-Factor Authentication 1.15.5 documentation_files/language_data.js.download"></script>
    <script async="async" type="text/javascript" src="./Installation — Django Two-Factor Authentication 1.15.5 documentation_files/readthedocs-doc-embed.js.download"></script>
    
    <link rel="index" title="Index" href="https://django-two-factor-auth.readthedocs.io/en/stable/genindex.html">
    <link rel="search" title="Search" href="https://django-two-factor-auth.readthedocs.io/en/stable/search.html">
    <link rel="next" title="Configuration" href="https://django-two-factor-auth.readthedocs.io/en/stable/configuration.html">
    <link rel="prev" title="Requirements" href="https://django-two-factor-auth.readthedocs.io/en/stable/requirements.html"> 
  
<!-- RTD Extra Head -->

<link rel="stylesheet" href="./Installation — Django Two-Factor Authentication 1.15.5 documentation_files/readthedocs-doc-embed.css" type="text/css">

<script type="application/json" id="READTHEDOCS_DATA">{"ad_free": false, "api_host": "https://readthedocs.org", "builder": "sphinx", "canonical_url": null, "docroot": "/docs/", "features": {"docsearch_disabled": false}, "global_analytics_code": "UA-17997319-1", "language": "en", "page": "installation", "programming_language": "py", "project": "django-two-factor-auth", "proxied_api_host": "/_", "source_suffix": ".rst", "subprojects": {}, "theme": "default", "user_analytics_code": "", "version": "stable"}</script>

<!--
Using this variable directly instead of using `JSON.parse` is deprecated.
The READTHEDOCS_DATA global variable will be removed in the future.
-->
<script type="text/javascript">
READTHEDOCS_DATA = JSON.parse(document.getElementById('READTHEDOCS_DATA').innerHTML);
</script>

<script type="text/javascript" src="./Installation — Django Two-Factor Authentication 1.15.5 documentation_files/readthedocs-analytics.js.download" async="async"></script>

<!-- end RTD <extrahead> -->
<script src="./Installation — Django Two-Factor Authentication 1.15.5 documentation_files/ethicalads.min.js.download" type="text/javascript" async="" id="ethicaladsjs"></script><script src="./Installation — Django Two-Factor Authentication 1.15.5 documentation_files/js" type="text/javascript" async=""></script></head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="https://django-two-factor-auth.readthedocs.io/en/stable/genindex.html" title="General Index" accesskey="I">index</a></li>
        <li class="right">
          <a href="https://django-two-factor-auth.readthedocs.io/en/stable/py-modindex.html" title="Python Module Index">modules</a> |</li>
        <li class="right">
          <a href="https://django-two-factor-auth.readthedocs.io/en/stable/configuration.html" title="Configuration" accesskey="N">next</a> |</li>
        <li class="right">
          <a href="https://django-two-factor-auth.readthedocs.io/en/stable/requirements.html" title="Requirements" accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="https://django-two-factor-auth.readthedocs.io/en/stable/index.html">Django Two-Factor Authentication 1.15.5 documentation</a> »</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="installation">
<h1>Installation<a class="headerlink" href="https://django-two-factor-auth.readthedocs.io/en/stable/installation.html#installation" title="Permalink to this headline">¶</a></h1>
<p>You can install from <a class="reference external" href="https://pypi.python.org/pypi/django-two-factor-auth">PyPI</a> using <code class="docutils literal notranslate"><span class="pre">pip</span></code> to install <code class="docutils literal notranslate"><span class="pre">django-two-factor-auth</span></code>
and its dependencies:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>django-two-factor-auth
</pre></div>
</div>
<p>This project uses <code class="docutils literal notranslate"><span class="pre">django-phonenumber-field</span></code> which requires either <code class="docutils literal notranslate"><span class="pre">phonenumbers</span></code>
or <code class="docutils literal notranslate"><span class="pre">phonenumberslite</span></code> to be installed. Either manually install a supported version
using <code class="docutils literal notranslate"><span class="pre">pip</span></code> or install <code class="docutils literal notranslate"><span class="pre">django-two-factor-auth</span></code> with the extras specified as in
the below examples:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>django-two-factor-auth<span class="o">[</span>phonenumbers<span class="o">]</span>

<span class="go">OR</span>

<span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>django-two-factor-auth<span class="o">[</span>phonenumberslite<span class="o">]</span>
</pre></div>
</div>
<div class="section" id="setup">
<h2>Setup<a class="headerlink" href="https://django-two-factor-auth.readthedocs.io/en/stable/installation.html#setup" title="Permalink to this headline">¶</a></h2>
<p>Add the following apps to the <code class="docutils literal notranslate"><span class="pre">INSTALLED_APPS</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="o">...</span>
    <span class="s1">'django_otp'</span><span class="p">,</span>
    <span class="s1">'django_otp.plugins.otp_static'</span><span class="p">,</span>
    <span class="s1">'django_otp.plugins.otp_totp'</span><span class="p">,</span>
    <span class="s1">'django_otp.plugins.otp_email'</span><span class="p">,</span>  <span class="c1"># &lt;- if you want email capability.</span>
    <span class="s1">'two_factor'</span><span class="p">,</span>
    <span class="s1">'two_factor.plugins.phonenumber'</span><span class="p">,</span>  <span class="c1"># &lt;- if you want phone number capability.</span>
    <span class="s1">'two_factor.plugins.email'</span><span class="p">,</span>  <span class="c1"># &lt;- if you want email capability.</span>
    <span class="s1">'two_factor.plugins.yubikey'</span><span class="p">,</span>  <span class="c1"># &lt;- for yubikey capability.</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Add the <code class="docutils literal notranslate"><span class="pre">django-otp</span></code> middleware to your <code class="docutils literal notranslate"><span class="pre">MIDDLEWARE</span></code>. Make sure
it comes after <code class="docutils literal notranslate"><span class="pre">AuthenticationMiddleware</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">MIDDLEWARE</span> <span class="o">=</span> <span class="p">(</span>
    <span class="o">...</span>
    <span class="s1">'django.contrib.auth.middleware.AuthenticationMiddleware'</span><span class="p">,</span>
    <span class="s1">'django_otp.middleware.OTPMiddleware'</span><span class="p">,</span>
    <span class="o">...</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Point to the new login pages in your <code class="docutils literal notranslate"><span class="pre">settings.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">LOGIN_URL</span> <span class="o">=</span> <span class="s1">'two_factor:login'</span>

<span class="c1"># this one is optional</span>
<span class="n">LOGIN_REDIRECT_URL</span> <span class="o">=</span> <span class="s1">'two_factor:profile'</span>
</pre></div>
</div>
<p>Add the routes to your project url configuration:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">two_factor.urls</span> <span class="kn">import</span> <span class="n">urlpatterns</span> <span class="k">as</span> <span class="n">tf_urls</span>
<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
   <span class="n">path</span><span class="p">(</span><span class="s1">''</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">tf_urls</span><span class="p">)),</span>
    <span class="o">...</span>
<span class="p">]</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Be sure to remove any other login routes, otherwise the two-factor
authentication might be circumvented. The admin interface should be
automatically patched to use the new login method.</p>
</div>
</div>
<div class="section" id="yubikey-setup">
<h2>Yubikey Setup<a class="headerlink" href="https://django-two-factor-auth.readthedocs.io/en/stable/installation.html#yubikey-setup" title="Permalink to this headline">¶</a></h2>
<p>In order to support <a class="reference external" href="https://www.yubico.com/products/yubikey-hardware/">Yubikeys</a>, you have to install a plugin for <cite>django-otp</cite>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>django-otp-yubikey
</pre></div>
</div>
<p>Add the following app to the <code class="docutils literal notranslate"><span class="pre">INSTALLED_APPS</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="o">...</span>
    <span class="s1">'otp_yubikey'</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<p>This plugin also requires adding a validation service, through which YubiKeys
will be verified. Normally, you’d use the YubiCloud for this. In the Django
admin, navigate to <code class="docutils literal notranslate"><span class="pre">YubiKey</span> <span class="pre">validation</span> <span class="pre">services</span></code> and add an item. Django
Two-Factor Authentication will identify the validation service with the
name <code class="docutils literal notranslate"><span class="pre">default</span></code>. The other fields can be left empty, but you might want to
consider requesting an API ID along with API key and using SSL for
communicating with YubiCloud.</p>
<p>You could also do this using Django’s <cite>manage.py shell</cite>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python<span class="w"> </span>manage.py<span class="w"> </span>shell
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">otp_yubikey.models</span> <span class="kn">import</span> <span class="n">ValidationService</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ValidationService</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">name</span><span class="o">=</span><span class="s1">'default'</span><span class="p">,</span> <span class="n">use_ssl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">param_sl</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span> <span class="n">param_timeout</span><span class="o">=</span><span class="s1">''</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">&lt;ValidationService: default&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="webauthn-setup">
<span id="id1"></span><h2>WebAuthn Setup<a class="headerlink" href="https://django-two-factor-auth.readthedocs.io/en/stable/installation.html#webauthn-setup" title="Permalink to this headline">¶</a></h2>
<p>In order to support <a class="reference external" href="https://www.w3.org/TR/webauthn/">WebAuthn</a> devices, you have to install the <a class="reference external" href="https://pypi.org/project/webauthn/">py_webauthn</a> package.
It’s a <code class="docutils literal notranslate"><span class="pre">django-two-factor-auth</span></code> extra so you can select it at install time:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>django-two-factor-auth<span class="o">[</span>webauthn<span class="o">]</span>
</pre></div>
</div>
<p>You need to include the plugin in your Django settings:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="o">...</span>
    <span class="s1">'two_factor.plugins.webauthn'</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<p>WebAuthn also requires your service to be reachable using HTTPS.
An exception is made if the domain is <code class="docutils literal notranslate"><span class="pre">localhost</span></code>, which can be served using plain HTTP.</p>
<p>If you use a different domain, don’t forget to set <code class="docutils literal notranslate"><span class="pre">SECURE_PROXY_SSL_HEADER</span></code> in your Django settings accordingly:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">SECURE_PROXY_SSL_HEADER</span> <span class="o">=</span> <span class="p">(</span><span class="s1">'HTTP_X_FORWARDED_PROTO'</span><span class="p">,</span> <span class="s1">'https'</span><span class="p">)</span>
</pre></div>
</div>
<p>You can try a WebAuthn-enabled version of the example app that is reachable at <a class="reference external" href="http://localhost:8000/">http://localhost:8000</a>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>make<span class="w"> </span>example-webauthn
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="https://django-two-factor-auth.readthedocs.io/en/stable/index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="https://django-two-factor-auth.readthedocs.io/en/stable/installation.html#">Installation</a><ul>
<li><a class="reference internal" href="https://django-two-factor-auth.readthedocs.io/en/stable/installation.html#setup">Setup</a></li>
<li><a class="reference internal" href="https://django-two-factor-auth.readthedocs.io/en/stable/installation.html#yubikey-setup">Yubikey Setup</a></li>
<li><a class="reference internal" href="https://django-two-factor-auth.readthedocs.io/en/stable/installation.html#webauthn-setup">WebAuthn Setup</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="https://django-two-factor-auth.readthedocs.io/en/stable/requirements.html" title="previous chapter">Requirements</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="https://django-two-factor-auth.readthedocs.io/en/stable/configuration.html" title="next chapter">Configuration</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="https://django-two-factor-auth.readthedocs.io/en/stable/_sources/installation.rst.txt" rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="https://django-two-factor-auth.readthedocs.io/en/stable/search.html" method="get">
      <input type="text" name="q">
      <input type="submit" value="Go">
      <input type="hidden" name="check_keywords" value="yes">
      <input type="hidden" name="area" value="default">
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="https://django-two-factor-auth.readthedocs.io/en/stable/genindex.html" title="General Index">index</a></li>
        <li class="right">
          <a href="https://django-two-factor-auth.readthedocs.io/en/stable/py-modindex.html" title="Python Module Index">modules</a> |</li>
        <li class="right">
          <a href="https://django-two-factor-auth.readthedocs.io/en/stable/configuration.html" title="Configuration">next</a> |</li>
        <li class="right">
          <a href="https://django-two-factor-auth.readthedocs.io/en/stable/requirements.html" title="Requirements">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="https://django-two-factor-auth.readthedocs.io/en/stable/index.html">Django Two-Factor Authentication 1.15.5 documentation</a> »</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        © Copyright 2014, Bouke Haarsma.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.6.
    </div>
  
<!-- Inserted RTD Footer -->

<div class="injected">

  
  <div class="rst-versions rst-badge" data-toggle="rst-versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book">&nbsp;</span>
      v: stable
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      

      
      
      
      <dl>
        <dt>Versions</dt>
        
        <dd>
          <a href="https://django-two-factor-auth.readthedocs.io/en/1.15.5/installation.html">1.15.5</a>
        </dd>
        
        <dd>
          <a href="https://django-two-factor-auth.readthedocs.io/en/1.15.4/installation.html">1.15.4</a>
        </dd>
        
        <dd>
          <a href="https://django-two-factor-auth.readthedocs.io/en/1.15.3/installation.html">1.15.3</a>
        </dd>
        
        <dd>
          <a href="https://django-two-factor-auth.readthedocs.io/en/1.15.2/installation.html">1.15.2</a>
        </dd>
        
        <dd>
          <a href="https://django-two-factor-auth.readthedocs.io/en/1.15.1/installation.html">1.15.1</a>
        </dd>
        
        <dd>
          <a href="https://django-two-factor-auth.readthedocs.io/en/1.15.0/installation.html">1.15.0</a>
        </dd>
        
        <dd>
          <a href="https://django-two-factor-auth.readthedocs.io/en/1.14.0/installation.html">1.14.0</a>
        </dd>
        
        <dd>
          <a href="https://django-two-factor-auth.readthedocs.io/en/1.13.2/installation.html">1.13.2</a>
        </dd>
        
        <dd>
          <a href="https://django-two-factor-auth.readthedocs.io/en/1.13.1/installation.html">1.13.1</a>
        </dd>
        
        <dd>
          <a href="https://django-two-factor-auth.readthedocs.io/en/1.13/installation.html">1.13</a>
        </dd>
        
        <dd>
          <a href="https://django-two-factor-auth.readthedocs.io/en/1.12.1/installation.html">1.12.1</a>
        </dd>
        
        <dd>
          <a href="https://django-two-factor-auth.readthedocs.io/en/1.12/installation.html">1.12</a>
        </dd>
        
      </dl>
      
      

      
      
      <dl>
        <dt>Downloads</dt>
        
        <dd><a href="https://django-two-factor-auth.readthedocs.io/_/downloads/en/stable/pdf/">PDF</a></dd>
        
        <dd><a href="https://django-two-factor-auth.readthedocs.io/_/downloads/en/stable/htmlzip/">HTML</a></dd>
        
        <dd><a href="https://django-two-factor-auth.readthedocs.io/_/downloads/en/stable/epub/">Epub</a></dd>
        
      </dl>
      
      

      
      <dl>
        
        <!-- These are kept as relative links for internal installs that are http -->
        <dt>On Read the Docs</dt>
        <dd>
          <a href="https://readthedocs.org/projects/django-two-factor-auth/">Project Home</a>
        </dd>
        <dd>
          <a href="https://readthedocs.org/projects/django-two-factor-auth/builds/">Builds</a>
        </dd>
        <dd>
          <a href="https://readthedocs.org/projects/django-two-factor-auth/downloads/">Downloads</a>
        </dd>
      </dl>
      

      

      
      <dl>
        <dt>On GitHub</dt>
        <dd>
          <a href="https://github.com/jazzband/django-two-factor-auth/blob/c53c1b46c22eaee2ccf0fee136bf61da1d211048/docs/installation.rst">View</a>
        </dd>
        
      </dl>
      
      

      
      <dl>
        <dt>Search</dt>
        <dd>
          <div style="padding: 6px;">
            
            <form id="flyout-search-form" class="wy-form" target="_blank" action="https://readthedocs.org/projects/django-two-factor-auth/search/" method="get">
              <input type="text" name="q" aria-label="Search docs" placeholder="Search docs">
              </form>
          </div>
        </dd>
      </dl>
      

      <hr>

      
        <small>
          <span>Hosted by <a href="https://readthedocs.org/">Read the Docs</a></span>
          <span> · </span>
          <a href="https://docs.readthedocs.io/page/privacy-policy.html">Privacy Policy</a>
        </small>
      

      
    </div>
  </div>
  

</div>
</body></html>